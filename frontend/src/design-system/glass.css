/**
 * Glassmorphism utilities (per references/glass/glassmorphism-instructions.md)
 * Use on vibrant backgrounds (--bg-canvas). Requires backdrop-filter + -webkit-backdrop-filter.
 */

/* Base glass surface */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid var(--glass-border);
  box-shadow: var(--glass-shadow);
  border-radius: var(--glass-radius);
  transition: background var(--duration-normal) var(--timing-ease),
    box-shadow var(--duration-normal) var(--timing-ease),
    transform var(--duration-fast) var(--timing-ease);
}

@supports not (backdrop-filter: blur(10px)) {
  .glass {
    background: var(--glass-bg-fallback);
  }
}

@media (prefers-reduced-motion: reduce) {
  .glass {
    transition: none;
  }
}

/* Glass card – content panels */
.glass-card {
  background: var(--glass-bg);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid var(--glass-border);
  box-shadow: var(--glass-shadow);
  border-radius: var(--glass-radius-lg);
  padding: var(--spacing-6);
  transition: background var(--duration-normal) var(--timing-ease),
    box-shadow var(--duration-normal) var(--timing-ease),
    transform var(--duration-fast) var(--timing-ease);
}

.glass-card:hover {
  background: var(--glass-bg-hover);
  box-shadow: var(--glass-shadow-hover);
}

@supports not (backdrop-filter: blur(10px)) {
  .glass-card {
    background: var(--glass-bg-fallback);
  }
}

@media (prefers-reduced-motion: reduce) {
  .glass-card {
    transition: none;
  }
  .glass-card:hover {
    transform: none;
  }
}

/* Glass nav – sticky nav bar */
.glass-nav {
  background: var(--glass-bg);
  backdrop-filter: blur(12px) saturate(180%);
  -webkit-backdrop-filter: blur(12px) saturate(180%);
  border-bottom: 1px solid var(--glass-border);
  position: sticky;
  top: 0;
  z-index: var(--z-sticky);
}

@supports not (backdrop-filter: blur(12px)) {
  .glass-nav {
    background: var(--glass-bg-fallback);
  }
}

/* Glass panel – main content area */
.glass-panel {
  background: var(--glass-bg);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid var(--glass-border);
  box-shadow: var(--glass-shadow);
  border-radius: var(--glass-radius-lg);
  overflow: hidden;
}

@supports not (backdrop-filter: blur(10px)) {
  .glass-panel {
    background: var(--glass-bg-fallback);
  }
}

/* Liquid glass – readable content panels (dark text on light). Use for /model, /data, /metrics, forms. */
.liquid-glass {
  background: var(--glass-content-bg);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid var(--glass-content-border);
  box-shadow: var(--glass-shadow);
  border-radius: var(--glass-radius-lg);
  color: var(--text-primary);
}

@supports not (backdrop-filter: blur(12px)) {
  .liquid-glass {
    background: var(--glass-content-bg);
  }
}

/* Text on glass (over dark/vibrant canvas) – uses design tokens */
.text-on-glass {
  color: var(--text-on-glass);
}

.text-on-glass-secondary {
  color: var(--text-on-glass-muted);
}

.text-on-glass-subtle {
  color: var(--text-on-glass-subtle);
}

/* Glass-surface: design-system glass look without blur (for inner cards/sections) */
.glass-surface {
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  box-shadow: var(--glass-shadow);
  border-radius: var(--glass-radius-lg);
}

@supports not (backdrop-filter: blur(10px)) {
  .glass-surface {
    background: var(--glass-bg-fallback);
  }
}

/* Mobile: reduce blur for performance (per references/glass) */
@media (max-width: 768px) {
  .glass,
  .glass-card,
  .glass-panel,
  .liquid-glass {
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
  }
  .glass-nav {
    backdrop-filter: blur(8px) saturate(160%);
    -webkit-backdrop-filter: blur(8px) saturate(160%);
  }
}
